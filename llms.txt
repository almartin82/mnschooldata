# mnschooldata

**[Documentation](https://almartin82.github.io/mnschooldata/)** \|
**[Getting
Started](https://almartin82.github.io/mnschooldata/articles/quickstart.html)**

Fetch and analyze Minnesota school enrollment data from the Minnesota
Department of Education (MDE) in R or Python.

## What can you find with mnschooldata?

**18 years of enrollment data (2007-2024).** 870,000 students. 330+
districts. Here are ten stories hiding in the numbers:

------------------------------------------------------------------------

### 1. Minneapolis and St. Paul are shrinking

The Twin Cities’ two urban districts have each lost over 10,000 students
in the past decade.

``` r
library(mnschooldata)
library(dplyr)

enr <- fetch_enr_multi(2015:2024)

enr %>%
  filter(is_district, grepl("Minneapolis|St. Paul", district_name),
         subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(end_year, district_name, n_students)
```

![Twin Cities decline](reference/figures/twin-cities-decline.png)

Twin Cities decline

------------------------------------------------------------------------

### 2. Somali students transformed Minneapolis schools

Minneapolis has one of the largest Somali populations in the US, now
over 20,000 students.

``` r
enr %>%
  filter(is_district, grepl("Minneapolis", district_name),
         grade_level == "TOTAL", subgroup == "black") %>%
  mutate(pct = round(pct * 100, 1)) %>%
  select(end_year, n_students, pct)
```

![Minneapolis diversity](reference/figures/mpls-diversity.png)

Minneapolis diversity

------------------------------------------------------------------------

### 3. Charter schools serve 60,000+ students

Minnesota invented charter schools in 1991, and now over 180 charters
serve nearly 7% of the state.

``` r
enr_2024 <- fetch_enr(2024)

# Charter schools have district type 07
enr_2024 %>%
  filter(is_charter, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  summarize(
    total_charter = sum(n_students, na.rm = TRUE),
    n_schools = n()
  )
```

![Charter enrollment](reference/figures/charter-enrollment.png)

Charter enrollment

------------------------------------------------------------------------

### 4. Suburban ring is booming

Districts like Anoka-Hennepin, Lakeville, and Prior Lake are growing
while the core cities shrink.

``` r
suburban <- c("Anoka-Hennepin", "Lakeville", "Prior Lake", "Rosemount")

enr %>%
  filter(is_district, grepl(paste(suburban, collapse = "|"), district_name),
         subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  group_by(district_name) %>%
  mutate(index = n_students / first(n_students) * 100) %>%
  select(end_year, district_name, index)
```

![Suburban growth](reference/figures/suburban-growth.png)

Suburban growth

------------------------------------------------------------------------

### 5. Minnesota is diversifying fast

From 85% white in 2007 to under 70% today - one of the fastest
demographic shifts in the Midwest.

``` r
enr <- fetch_enr_multi(c(2007, 2012, 2017, 2022, 2024))

enr %>%
  filter(is_state, grade_level == "TOTAL",
         subgroup %in% c("white", "black", "hispanic", "asian")) %>%
  mutate(pct = round(pct * 100, 1)) %>%
  select(end_year, subgroup, pct)
```

![Demographic shift](reference/figures/demographics.png)

Demographic shift

------------------------------------------------------------------------

### 6. COVID hit kindergarten hard

Minnesota lost 8% of kindergartners in 2021 - nearly 5,000 fewer kids.

``` r
enr <- fetch_enr_multi(2018:2024)

enr %>%
  filter(is_state, subgroup == "total_enrollment",
         grade_level %in% c("K", "01", "06", "12")) %>%
  select(end_year, grade_level, n_students)
```

![COVID kindergarten](reference/figures/covid-k.png)

COVID kindergarten

------------------------------------------------------------------------

### 7. Iron Range still declining

Districts in northern Minnesota’s mining region continue to lose
students as the population ages.

``` r
iron_range <- c("Hibbing", "Virginia", "Eveleth", "Chisholm")

enr %>%
  filter(is_district, grepl(paste(iron_range, collapse = "|"), district_name, ignore.case = TRUE),
         subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(end_year, district_name, n_students)
```

![Iron Range](reference/figures/iron-range.png)

Iron Range

------------------------------------------------------------------------

### 8. Rochester: A growing city

Driven by Mayo Clinic expansion, Rochester is one of the few outstate
cities gaining students.

``` r
enr %>%
  filter(is_district, grepl("Rochester", district_name),
         subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  select(end_year, n_students)
```

![Rochester growth](reference/figures/rochester-growth.png)

Rochester growth

------------------------------------------------------------------------

### 9. English learners approaching 10%

Over 80,000 students are English learners, concentrated in the Twin
Cities metro.

``` r
enr_2024 %>%
  filter(is_district, subgroup == "lep", grade_level == "TOTAL") %>%
  arrange(desc(n_students)) %>%
  select(district_name, n_students, pct) %>%
  head(10)
```

![EL concentration](reference/figures/el-concentration.png)

EL concentration

------------------------------------------------------------------------

### 10. Free/Reduced lunch shows economic divide

From 3% in wealthy Edina to 80%+ in some urban and rural districts.

``` r
enr_2024 %>%
  filter(is_district, subgroup == "econ_disadv", grade_level == "TOTAL") %>%
  arrange(desc(pct)) %>%
  mutate(pct = round(pct * 100, 1)) %>%
  select(district_name, n_students, pct) %>%
  head(10)
```

![Economic divide](reference/figures/econ-divide.png)

Economic divide

------------------------------------------------------------------------

## Installation

``` r
# install.packages("remotes")
remotes::install_github("almartin82/mnschooldata")
```

## Quick start

### R

``` r
library(mnschooldata)
library(dplyr)

# Fetch one year
enr_2024 <- fetch_enr(2024)

# Fetch multiple years
enr_multi <- fetch_enr_multi(2020:2024)

# State totals
enr_2024 %>%
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL")

# Largest districts
enr_2024 %>%
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") %>%
  arrange(desc(n_students)) %>%
  head(15)

# Minneapolis demographics
enr_2024 %>%
  filter(grepl("Minneapolis", district_name), grade_level == "TOTAL",
         subgroup %in% c("white", "black", "hispanic", "asian")) %>%
  select(subgroup, n_students, pct)
```

### Python

``` python
import pymnschooldata as mn

# Check available years
years = mn.get_available_years()
print(f"Data available from {years['min_year']} to {years['max_year']}")

# Fetch one year
enr_2024 = mn.fetch_enr(2024)

# Fetch multiple years
enr_multi = mn.fetch_enr_multi([2020, 2021, 2022, 2023, 2024])

# State totals
state_total = enr_2024[
    (enr_2024['is_state'] == True) &
    (enr_2024['subgroup'] == 'total_enrollment') &
    (enr_2024['grade_level'] == 'TOTAL')
]

# Largest districts
districts = enr_2024[
    (enr_2024['is_district'] == True) &
    (enr_2024['subgroup'] == 'total_enrollment') &
    (enr_2024['grade_level'] == 'TOTAL')
].sort_values('n_students', ascending=False).head(15)
```

## Data availability

| Years         | Source              | Notes                                       |
|---------------|---------------------|---------------------------------------------|
| **2017-2024** | MDEAnalytics Modern | Current format with standardized columns    |
| **2007-2016** | MDEAnalytics Legacy | Earlier format with different column naming |

Data is sourced from the Minnesota Department of Education: -
MDEAnalytics Portal:
<https://pub.education.mn.gov/MDEAnalytics/Data.jsp> - MDE Data Center:
<https://education.mn.gov/MDE/Data/>

### What’s included

- **Levels:** State, District (~330), School (~2,200)
- **Demographics:** White, Black, Hispanic, Asian, Native American,
  Pacific Islander, Multiracial
- **Special populations:** Economically disadvantaged, English learners,
  Special education, Homeless
- **Grade levels:** PK through 12

### Minnesota-specific notes

- **District Types:**
  - 01: Independent School Districts (most districts)
  - 02: Common School Districts
  - 03: Special School Districts (Minneapolis, St. Paul, Duluth)
  - 06: Intermediate School Districts (IEICs)
  - 07: Charter Schools (~180 charters)
- **MARSS:** Minnesota Automated Reporting Student System
- **October 1 counts:** All enrollment data represents October 1
  official counts
- **Suppression:** Small cell sizes may be suppressed for privacy

## Part of the State Schooldata Project

A simple, consistent interface for accessing state-published school data
in Python and R.

**All 50 state packages:**
[github.com/almartin82](https://github.com/almartin82?tab=repositories&q=schooldata)

## Author

[Andy Martin](https://github.com/almartin82) (<almartin@gmail.com>)

## License

MIT

# Package index

## Fetch Data

Functions for downloading enrollment data from MDE

- [`fetch_enr()`](https://almartin82.github.io/mnschooldata/reference/fetch_enr.md)
  : Fetch Minnesota enrollment data
- [`fetch_enr_multi()`](https://almartin82.github.io/mnschooldata/reference/fetch_enr_multi.md)
  : Fetch enrollment data for multiple years
- [`get_available_years()`](https://almartin82.github.io/mnschooldata/reference/get_available_years.md)
  : Get available years for enrollment data

## Transform Data

Functions for reshaping and annotating enrollment data

- [`tidy_enr()`](https://almartin82.github.io/mnschooldata/reference/tidy_enr.md)
  : Tidy enrollment data
- [`id_enr_aggs()`](https://almartin82.github.io/mnschooldata/reference/id_enr_aggs.md)
  : Identify enrollment aggregation levels
- [`enr_grade_aggs()`](https://almartin82.github.io/mnschooldata/reference/enr_grade_aggs.md)
  : Custom Enrollment Grade Level Aggregates

## Cache Management

Functions for managing locally cached data

- [`cache_status()`](https://almartin82.github.io/mnschooldata/reference/cache_status.md)
  : Show cache status
- [`clear_cache()`](https://almartin82.github.io/mnschooldata/reference/clear_cache.md)
  : Clear the mnschooldata cache

## Package

- [`mnschooldata-package`](https://almartin82.github.io/mnschooldata/reference/mnschooldata-package.md)
  : mnschooldata: Fetch and Process Minnesota School Data

